class jax{static#t=null;static#e=null;static#s=null;static#a=new Map;static#r=null;static#i=null;static#n=null;static#o="undefined"==typeof window;static#h="https";static#l=["text","arraybuffer","json","blob","document"];static#c(){let t=!1;if(window.XMLHttpRequest)t=new XMLHttpRequest;else if(window.ActiveXObject)try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){t=new ActiveXObject("Msxml2.XMLHTTP")}return t?(this.#t=t,!0):(console.error("Unable create XMLHttpRequest"),!1)}static setSSL(t=!0){this.#h=t?"https":"http"}static#p(t,e){return e instanceof Map?{dataType:"Map",value:Array.from(e.entries())}:e}static#d(t,e){return"object"==typeof e&&null!==e&&"Map"===e.dataType?new Map(e.value):e}static#f(t){let e=t.getElementsByTagName("input");for(let t of e)if("file"==t.type)return!0;return!1}static#u(t,e=!1){let s=e?new FormData:[];try{if(t instanceof Map&&(t=Object.fromEntries(t)),!(t instanceof Object))return!1;for(let a in t){let r=t[a];if(r instanceof Object||r instanceof Map){r=r instanceof Object?Object.entries(r):r;for(let[t,i]of r)e?s.append(a+`[${t}]`,i.toString()):s.push(a+`[${t}]=`+encodeURIComponent(i.toString()))}else if(Array.isArray(r))for(let t of r)e?s.append(a+"[]",t.toString()):s.push(a+"[]="+encodeURIComponent(t.toString()));else e?s.append(a,r.toString()):s.push(a+"="+encodeURIComponent(r.toString()))}return e||(s=s.join("&")),s}catch(t){return console.error(t),!1}}static#m(t,e=!1){try{if(t instanceof FormData){let s;if(e){s={};let e=0;for(let[a,r]of t.entries())if(/[\[\]]/gm.test(a)){let t=a.match(/[\[]([\w]+)[\]]/);if(null!=t&&t.length>1){let e=a.replace(/[\[]([\w]+)[\]]/g,"");null==s[e]&&(s[e]={}),s[e][t[1]]=r}else{let t=a.replace(/[\[\]]/g,"");null==s[t]&&(s[t]={}),s[t][e.toString()]=r}e++}else s[a]=r;return s}s=[];for(let[e,a]of t.entries())s.push(encodeURIComponent(e)+"="+encodeURIComponent(a));return s=s.join("&"),s}return!1}catch(t){return console.error(t),!1}}static#y(t=!1){try{if("boolean"!=typeof this.#e?.credentials||this.#o||(this.#t.withCredentials=this.#e.credentials),null!=this.#e?.headers&&null!=this.#e?.headers)for(let[t,e]of this.#e.headers)"content-type"!=t.toLowerCase()&&this.#a.set(t,e);if("GET"==this.#s||"DELETE"==this.#s){if(this.#a.set("Content-type","application/x-www-form-urlencoded"),null!=this.#e?.data&&null!=this.#e?.data)if(!this.#o&&this.#e.data instanceof FormData)this.#i+="?"+this.#m(this.#e.data);else if(this.#e.data instanceof Map)this.#i+="?"+this.#u(this.#e.data).bind(this);else if(this.#e.data instanceof Object)this.#i+="?"+this.#u(this.#e.data);else if(this.#e.data instanceof HTMLElement||"string"==typeof this.#e.data){let t=this.#e.data instanceof HTMLElement?this.#e.data:document.getElementById(this.#e.data);if(this.#f(t))console.error("File cannot be sent by the GET method");else{let e=new FormData(t);this.#i+="?"+this.#m(e)}}}else if(t&&null!=this.#e?.files&&null!=this.#e?.files){if(!this.#o){this.#a.delete("Content-type");let t=new FormData;if(this.#e.files instanceof File)t.append("files[]",this.#e.files);else if(this.#e.files instanceof FileList)for(let e of this.#e.files)t.append("files[]",e);this.#r=t}}else{let t="url";if(this.#a.set("Content-type","application/x-www-form-urlencoded"),"string"==typeof this.#e?.sendType)switch(this.#e.sendType){case"json":t="json",this.#a.set("Content-type","application/json; charset=utf-8");break;case"form":t="form",this.#a.set("Content-type","multipart/form-data");break;default:t="url",this.#a.set("Content-type","application/x-www-form-urlencoded")}if(null==this.#e?.data||null==this.#e?.data)return!1;if(!this.#o&&this.#e.data instanceof FormData)switch(t){case"json":this.#r=JSON.stringify(this.#m(this.#e.data,!0));break;case"form":this.#r=this.#e.data;break;case"url":this.#r=this.#m(this.#e.data)}else if(this.#e.data instanceof Map)switch(t){case"json":this.#r=JSON.stringify(this.#e.data,this.#p);break;case"form":this.#r=this.#u(this.#e.data,!0);break;case"url":this.#r=this.#u(this.#e.data)}else if(this.#e.data instanceof Object)switch(t){case"json":this.#r=JSON.stringify(this.#e.data,this.#p);break;case"form":this.#r=this.#u(this.#e.data,!0);break;case"url":this.#r=this.#u(this.#e.data)}else if(this.#e.data instanceof HTMLElement&&!this.#o||"string"==typeof this.#e.data&&!this.#o){let e=this.#e.data instanceof HTMLElement?this.#e.data:document.getElementById(this.#e.data),s=new FormData(e);switch(t){case"json":this.#r=JSON.stringify(this.#m(s,!0));break;case"form":this.#r=s;break;case"url":this.#r=this.#m(s)}}}if("string"==typeof this.#e?.responseType)for(let t of this.#l)if(this.#e.responseType==t){this.#o?this.#n=t:this.#t.responseType=t;break}return null==this.#t||""!=this.#t.responseType||this.#o||(this.#t.responseType="json"),null==this.#n&&this.#o&&(this.#n="json"),"function"!=typeof this.#e?.progress||this.#o||(this.#t.upload.onprogress=this.#e.progress),!0}catch(t){return console.error(t),!1}}static async#b(){return new Promise(((t,e)=>{let s,a,r=[];try{let i=this.#i.replace(/^(http:\/\/|https:\/\/)/,"");"POST"!=this.#s&&"PUT"!=this.#s||this.#a.set("Content-Length",Buffer.byteLength(this.#r)),a=require(this.#h),i=i.split("/");let n=i.shift(),o=i.join("/");s={hostname:n,port:"http"==this.#h?80:443,path:`/${o}`,method:this.#s,headers:Object.fromEntries(this.#a)};const h=a.request(s,(e=>{e.on("data",(t=>{r.push(t)})),e.on("end",(()=>{let s;if(this.#e=null,this.#s=null,this.#a.clear(),this.#r=null,this.#i=null,r.length){switch(this.#n){case"text":case"document":default:s=1==r.length?r[0].toString("utf8"):r.reduce(((t,e)=>t+e.toString("utf8")));break;case"blob":case"arraybuffer":if(1==r.length)s=r[0];else{let t=0;for(let e of r)t+=e.length;s=Buffer.concat(r,t)}break;case"json":s=1==r.length?r[0].toString("utf8"):r.reduce(((t,e)=>t+e.toString("utf8"))),s=JSON.parse(s)}t(s)}else t(e.statusCode);this.#n=null}))}));h.on("error",(t=>{console.error(t),e(t)})),"POST"!=this.#s&&"PUT"!=this.#s||h.write(this.#r),h.end()}catch(t){console.error("Unable send request, URL error"),e(t)}}))}static async#T(){return new Promise(((t,e)=>{this.#t.addEventListener("load",function(e){this.#e=null,this.#s=null,this.#a.clear(),this.#r=null,this.#i=null,t(e.target.response)}.bind(this)),this.#t.addEventListener("error",function(t){e("Error: send failed")}.bind(this)),this.#t.open(this.#s,this.#i,!0);for(let[t,e]of this.#a)this.#t.setRequestHeader(t,e);try{"POST"==this.#s||"PUT"==this.#s?this.#t.send(this.#r):this.#t.send(null)}catch(t){e(t)}}))}static async#O(t,e,s=!1){if(this.#e=e,this.#i=t,this.#o){if(this.#y(s))return this.#b()}else if(this.#c(),this.#y(s))return this.#T()}static async post(t,e){return this.#s="POST",this.#O(t,e)}static async get(t,e){return this.#s="GET",this.#O(t,e)}static async put(t,e){return this.#s="PUT",this.#O(t,e)}static async delete(t,e){return this.#s="DELETE",this.#O(t,e)}static async file(t,e){return this.#s="POST",this.#O(t,e,!0)}}"undefined"==typeof window&&(module.exports=jax);